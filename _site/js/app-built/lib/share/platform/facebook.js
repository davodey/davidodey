SharrrePlatform.register("facebook",function(e){return defaultSettings={url:"",urlCount:!1,action:"like",layout:"button_count",count:!0,width:"",send:"false",faces:"false",colorscheme:"",font:"",lang:"en_US",share:"",appId:"",popup:{width:900,height:500}},defaultSettings=$.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback=?"},trackingAction:{site:"facebook",action:"like"},load:function(e){var t=this.settings;$(e.element).find(".buttons").append('<div class="button facebook"><div id="fb-root"></div><div class="fb-like" data-href="'+(t.url!==""?t.url:e.options.url)+'" data-send="'+t.send+'" data-layout="'+t.layout+'" data-width="'+t.width+'" data-show-faces="'+t.faces+'" data-action="'+t.action+'" data-colorscheme="'+t.colorscheme+'" data-font="'+t.font+'" data-via="'+t.via+'" data-share="'+t.share+'"></div></div>');var n=0;typeof FB=="undefined"&&n==0?(n=1,function(e,n,r){var i,s=e.getElementsByTagName(n)[0];if(e.getElementById(r))return;i=e.createElement(n),i.id=r,i.src="https://connect.facebook.net/"+t.lang+"/all.js#xfbml=1",t.appId&&(i.src+="&appId="+t.appId),s.parentNode.insertBefore(i,s)}(document,"script","facebook-jssdk")):FB.XFBML.parse()},tracking:function(){fb=window.setInterval(function(){typeof FB!="undefined"&&(FB.Event.subscribe("edge.create",function(e){_gaq.push(["_trackSocial","facebook","like",e])}),FB.Event.subscribe("edge.remove",function(e){_gaq.push(["_trackSocial","facebook","unlike",e])}),FB.Event.subscribe("message.send",function(e){_gaq.push(["_trackSocial","facebook","send",e])}),clearInterval(fb))},1e3)},popup:function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.settings.url!==""?this.settings.url:e.url)+"&t="+e.text+"","","toolbar=0, status=0, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}});