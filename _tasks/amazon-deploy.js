var gulp = require('gulp'),
    notify = require('gulp-notify'),
    gutil = require( 'gulp-util' ),
    rsync = require('rsyncwrapper').rsync;

/////////////////// JIRA TICKET NUMBER GOES BELOW //////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
var jiraNumber = "new-gulp"; /// CHANGE THIS NUMBER HERE TO CREATE A NEW WEB SERVER FOLDER
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
gulp.task('deploy', function() {
    rsync({
        ssh: true,
        src: 'pattern-lab/public/**',
        dest: 'ubuntu@52.27.79.69:/var/www/html/' + jiraNumber,
        privateKey: '../david.pem',
        recursive: true,
        syncDest: true,
        args: ['--verbose']
        
    }, function(error, stdout, stderr, cmd) {
        gutil.log(stdout);
        notify().write({message: 'Files deployed to Amazon server'}); 

    });
    
});